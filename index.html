<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log Divisi Laminasi Artdiary</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; -webkit-tap-highlight-color: transparent; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        input[type="time"]::-webkit-calendar-picker-indicator { cursor: pointer; }
    </style>
</head>
<body class="bg-[#f8fafc] text-slate-900 min-h-screen">
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        const { useState, useEffect, useMemo } = React;

        // ==========================================
        // Firebase Config
        // ==========================================
        const manualConfig = {
            apiKey: "AIzaSyDhqBiORVQBr4RJhjV_Q8CAcyGthNTKOz8",
            authDomain: "laminasi-artdiary.firebaseapp.com",
            projectId: "laminasi-artdiary",
            storageBucket: "laminasi-artdiary.firebasestorage.app",
            messagingSenderId: "791864658926",
            appId: "1:791864658926:web:a2136c6df23e2ed99e1cff",
            measurementId: "G-92JVZJHLER"
        };

        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : manualConfig;

        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-auth.js";
        import { getFirestore, collection, addDoc, onSnapshot, deleteDoc, doc, serverTimestamp, query } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js";

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'artdiary-laminasi-v1';
        
        const SHEETS_WEBAPP_URL = "https://script.google.com/macros/s/AKfycbwNdF232eSTWJLN80Ze4fYL3tRKSAJo70qXLbXM-PaU0oMDP4HxuA7Xz5KiraubZZNm/exec";

        const Icon = ({ name, size = 18, className = "" }) => {
            useEffect(() => { 
                if (window.lucide) window.lucide.createIcons(); 
            }, [name]);
            return <i data-lucide={name} className={className} style={{ width: size, height: size }}></i>;
        };

        const App = () => {
            const [user, setUser] = useState(null);
            const [tasks, setTasks] = useState([]);
            const [loading, setLoading] = useState(true);
            const [isSyncing, setIsSyncing] = useState(false);
            const [syncStatus, setSyncStatus] = useState(null);

            // Form States
            const [workerName, setWorkerName] = useState(localStorage.getItem('artdiary_worker_name') || '');
            const [assistantNames, setAssistantNames] = useState(''); 
            const [itemName, setItemName] = useState('');
            const [totalOplah, setTotalOplah] = useState(''); 
            const [totalPcs, setTotalPcs] = useState(''); 
            const [oplah, setOplah] = useState(''); 
            const [pcsSelesai, setPcsSelesai] = useState(''); 
            const [category, setCategory] = useState('Laminasi Glossy');
            const [kendala, setKendala] = useState('');
            const [startTime, setStartTime] = useState('');
            const [endTime, setEndTime] = useState('');
            const [selectedDate, setSelectedDate] = useState(new Date().toISOString().split('T')[0]);

            useEffect(() => {
                const initAuth = async () => {
                    try {
                        if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                            await signInWithCustomToken(auth, __initial_auth_token);
                        } else {
                            await signInAnonymously(auth);
                        }
                    } catch (err) {
                        console.error("Auth Error:", err);
                    }
                };
                initAuth();
                const unsubscribe = onAuthStateChanged(auth, (u) => {
                    setUser(u);
                    if (!u) setLoading(false);
                });
                return () => unsubscribe();
            }, []);

            useEffect(() => {
                if (!user) return;
                const colRef = collection(db, 'artifacts', appId, 'public', 'data', 'laminasi_logs');
                const unsubscribe = onSnapshot(colRef, 
                    (snapshot) => {
                        const data = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                        setTasks(data.sort((a, b) => (b.createdAt?.seconds || 0) - (a.createdAt?.seconds || 0)));
                        setLoading(false);
                    }, 
                    (err) => {
                        console.error("Firestore Error:", err);
                        setLoading(false);
                    }
                );
                return () => unsubscribe();
            }, [user]);

            useEffect(() => { 
                if (workerName) localStorage.setItem('artdiary_worker_name', workerName); 
            }, [workerName]);

            const formatNumber = (val) => {
                if (!val) return "";
                const num = val.toString().replace(/[^0-9]/g, '');
                return num ? Number(num).toLocaleString('id-ID') : "";
            };

            const activeProjects = useMemo(() => {
                const projects = {};
                tasks.forEach(t => {
                    if (t.name && !projects[t.name]) {
                        projects[t.name] = { 
                            name: t.name, 
                            totalOplah: formatNumber(t.totalOplah), 
                            totalPcs: formatNumber(t.totalPcs), 
                            lastCategory: t.category 
                        };
                    }
                });
                return Object.values(projects).slice(0, 4);
            }, [tasks]);

            const handleSubmit = async (e) => {
                e.preventDefault();
                if (!user || !workerName || !itemName || !startTime || !endTime) return;

                setIsSyncing(true);
                const [sH, sM] = startTime.split(':').map(Number);
                const [eH, eM] = endTime.split(':').map(Number);
                let duration = (eH * 60 + eM) - (sH * 60 + sM);
                if (duration < 0) duration += 1440;

                const now = new Date();
                const logData = {
                    date: now.toLocaleString('id-ID'),
                    workerName,
                    assistantNames: assistantNames || '-',
                    name: itemName,
                    category,
                    totalOplah: totalOplah.replace(/[^0-9]/g, '') || '0',
                    oplah: oplah.replace(/[^0-9]/g, '') || '0',
                    totalPcs: totalPcs.replace(/[^0-9]/g, '') || '0',
                    pcsSelesai: pcsSelesai.replace(/[^0-9]/g, '') || '0',
                    kendala: kendala || '-',
                    startTime,
                    endTime,
                    duration: duration + " menit"
                };

                try {
                    await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'laminasi_logs'), {
                        ...logData,
                        createdAt: serverTimestamp(),
                        dateString: now.toLocaleDateString('id-ID'),
                        isoDate: now.toISOString().split('T')[0],
                        durationValue: duration
                    });

                    if (SHEETS_WEBAPP_URL) {
                        fetch(SHEETS_WEBAPP_URL, { 
                            method: 'POST', 
                            mode: 'no-cors', 
                            headers: { 'Content-Type': 'text/plain' }, 
                            body: JSON.stringify(logData) 
                        }).catch(e => console.warn("Sheets Sync Fail", e));
                    }

                    setSyncStatus('success');
                    setItemName(''); setOplah(''); setPcsSelesai(''); setStartTime(''); setEndTime(''); setKendala('');
                    setTimeout(() => setSyncStatus(null), 3000);
                } catch (err) { 
                    console.error("Save Error:", err); 
                } finally { 
                    setIsSyncing(false); 
                }
            };

            const filteredTasks = tasks.filter(task => {
                const targetDate = selectedDate;
                if (task.isoDate) return task.isoDate === targetDate;
                if (task.createdAt) {
                    const d = task.createdAt.toDate ? task.createdAt.toDate() : new Date();
                    return d.toISOString().split('T')[0] === targetDate;
                }
                return false;
            });

            return (
                <div className="max-w-2xl mx-auto pb-28 min-h-screen relative">
                    <header className="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-slate-200 px-5 py-4 flex justify-between items-center rounded-b-xl shadow-sm">
                        <div className="flex items-center gap-2.5">
                            <div className="p-2 bg-blue-600 rounded-xl shadow-lg shadow-blue-100">
                                <Icon name="layers" size={18} className="text-white" />
                            </div>
                            <h1 className="text-base font-extrabold tracking-tight text-slate-900 uppercase italic">Artdiary <span className="text-blue-600">Laminasi</span></h1>
                        </div>
                        <div className={`flex items-center gap-2 px-2.5 py-1 rounded-full border transition-all ${user ? 'bg-emerald-50 border-emerald-100 text-emerald-600' : 'bg-red-50 border-red-100 text-red-500'}`}>
                            <div className={`w-2 h-2 rounded-full ${user ? 'bg-emerald-500' : 'bg-red-500 animate-pulse'}`}></div>
                            <span className="text-[10px] font-black uppercase tracking-tighter">{user ? 'Online' : 'Offline'}</span>
                        </div>
                    </header>

                    <main className="p-4 space-y-6">
                        {syncStatus === 'success' && (
                            <div className="bg-emerald-600 text-white p-4 rounded-2xl flex items-center gap-3 shadow-xl animate-in fade-in slide-in-from-top-4 duration-300">
                                <Icon name="check-circle" size={20} />
                                <p className="font-bold text-sm">Laporan terkirim & form dibersihkan!</p>
                            </div>
                        )}

                        <section className="bg-white rounded-[2rem] shadow-sm border border-slate-200 p-6">
                            <form onSubmit={handleSubmit} className="space-y-5">
                                <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                    <div className="space-y-1.5">
                                        <label className="text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1">Nama Operator</label>
                                        <div className="relative">
                                            <input type="text" value={workerName} onChange={(e) => setWorkerName(e.target.value)} placeholder="Nama Anda" className="w-full pl-10 pr-4 py-3 rounded-2xl border border-slate-200 focus:ring-2 focus:ring-blue-500 outline-none font-bold text-slate-700 bg-slate-50/50 transition-all" required />
                                            <Icon name="user" className="absolute left-3.5 top-1/2 -translate-y-1/2 text-slate-400" size={16} />
                                        </div>
                                    </div>
                                    <div className="space-y-1.5">
                                        <label className="text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1">Kru / Asisten</label>
                                        <div className="relative">
                                            <input type="text" value={assistantNames} onChange={(e) => setAssistantNames(e.target.value)} placeholder="Nama kru..." className="w-full pl-10 pr-4 py-3 rounded-2xl border border-slate-200 focus:ring-2 focus:ring-blue-500 outline-none font-medium text-slate-600 bg-slate-50/50 transition-all" />
                                            <Icon name="users" className="absolute left-3.5 top-1/2 -translate-y-1/2 text-slate-400" size={16} />
                                        </div>
                                    </div>
                                </div>

                                {activeProjects.length > 0 && (
                                    <div className="px-1">
                                        <div className="flex items-center gap-1.5 mb-2">
                                            <Icon name="history" size={12} className="text-slate-400" />
                                            <span className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Lanjutkan Projek</span>
                                        </div>
                                        <div className="flex flex-wrap gap-2">
                                            {activeProjects.map((p, idx) => (
                                                <button key={idx} type="button" onClick={() => { setItemName(p.name); setTotalOplah(p.totalOplah); setTotalPcs(p.totalPcs); setCategory(p.lastCategory); }} className="text-[10px] font-bold bg-white hover:bg-blue-600 hover:text-white text-slate-600 px-3 py-1.5 rounded-full border border-slate-200 transition-all active:scale-95 shadow-sm">
                                                    {p.name}
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                )}

                                <div className="grid grid-cols-1 sm:grid-cols-3 gap-4">
                                    <div className="sm:col-span-2 space-y-1.5">
                                        <label className="text-[10px] font-black text-slate-400 uppercase ml-1">Nama Item / Order</label>
                                        <input type="text" value={itemName} onChange={(e) => setItemName(e.target.value)} placeholder="Contoh: Box Skincare Glow Up" className="w-full px-4 py-3 rounded-2xl border border-slate-200 focus:ring-2 focus:ring-blue-500 outline-none font-bold text-slate-800" required />
                                    </div>
                                    <div className="space-y-1.5">
                                        <label className="text-[10px] font-black text-slate-400 uppercase ml-1">Tugas</label>
                                        <select value={category} onChange={(e) => setCategory(e.target.value)} className="w-full px-4 py-3 rounded-2xl border border-slate-200 focus:ring-2 focus:ring-blue-500 outline-none font-bold bg-white text-slate-700">
                                            {['Laminasi Glossy', 'Laminasi Doff', 'Laminasi Hologram', 'Laminasi Window', 'Bantu Mesin Lem', 'Bantu QC', 'Lain-lain'].map(cat => (
                                                <option key={cat} value={cat}>{cat}</option>
                                            ))}
                                        </select>
                                    </div>
                                </div>

                                <div className="grid grid-cols-2 gap-4">
                                    <div className="space-y-1.5">
                                        <label className="text-[10px] font-black text-red-500 uppercase ml-1">Target Oplah</label>
                                        <input type="text" value={totalOplah} onChange={(e) => setTotalOplah(formatNumber(e.target.value))} placeholder="0" className="w-full px-4 py-3 rounded-2xl border border-red-100 bg-red-50/20 font-bold text-red-700 outline-none focus:ring-2 focus:ring-red-500" />
                                    </div>
                                    <div className="space-y-1.5">
                                        <label className="text-[10px] font-black text-blue-600 uppercase ml-1">Target Pcs</label>
                                        <input type="text" value={totalPcs} onChange={(e) => setTotalPcs(formatNumber(e.target.value))} placeholder="0" className="w-full px-4 py-3 rounded-2xl border border-blue-100 bg-blue-50/20 font-bold text-blue-800 outline-none focus:ring-2 focus:ring-blue-500" />
                                    </div>
                                </div>

                                <div className="grid grid-cols-2 gap-4 pt-4 border-t border-dashed border-slate-200">
                                    <div className="space-y-1.5">
                                        <label className="text-[10px] font-black text-emerald-600 uppercase ml-1">Oplah Selesai</label>
                                        <input type="text" value={oplah} onChange={(e) => setOplah(formatNumber(e.target.value))} placeholder="Input hasil..." className="w-full px-4 py-3 rounded-2xl border-2 border-emerald-100 bg-emerald-50/50 font-extrabold text-emerald-800 text-lg outline-none focus:ring-2 focus:ring-emerald-500" />
                                    </div>
                                    <div className="space-y-1.5">
                                        <label className="text-[10px] font-black text-blue-800 uppercase ml-1">Pcs Selesai</label>
                                        <input type="text" value={pcsSelesai} onChange={(e) => setPcsSelesai(formatNumber(e.target.value))} placeholder="Input pcs..." className="w-full px-4 py-3 rounded-2xl border-2 border-blue-100 bg-blue-50/50 font-extrabold text-blue-900 text-lg outline-none focus:ring-2 focus:ring-blue-600" />
                                    </div>
                                </div>

                                <div className="space-y-1.5">
                                    <label className="text-[10px] font-black text-orange-600 uppercase ml-1">Kendala / Masalah</label>
                                    <div className="relative">
                                        <input type="text" value={kendala} onChange={(e) => setKendala(e.target.value)} placeholder="Contoh: Lem habis, mesin trouble..." className="w-full pl-10 pr-4 py-3 rounded-2xl border border-orange-100 bg-orange-50/30 font-medium text-orange-900 outline-none focus:ring-2 focus:ring-orange-400" />
                                        <Icon name="alert-circle" className="absolute left-3.5 top-1/2 -translate-y-1/2 text-orange-400" size={16} />
                                    </div>
                                </div>

                                <div className="grid grid-cols-2 gap-4">
                                    <div className="space-y-1.5">
                                        <label className="text-[10px] font-black text-slate-400 uppercase ml-1 text-center block">Mulai</label>
                                        <input type="time" value={startTime} onChange={(e) => setStartTime(e.target.value)} className="w-full p-3 rounded-2xl border border-slate-200 font-bold text-center bg-slate-50 text-xl" required />
                                    </div>
                                    <div className="space-y-1.5">
                                        <label className="text-[10px] font-black text-slate-400 uppercase ml-1 text-center block">Selesai</label>
                                        <input type="time" value={endTime} onChange={(e) => setEndTime(e.target.value)} className="w-full p-3 rounded-2xl border border-slate-200 font-bold text-center bg-slate-50 text-xl" required />
                                    </div>
                                </div>

                                <button type="submit" disabled={isSyncing} className={`w-full ${isSyncing ? 'bg-slate-400 cursor-not-allowed' : 'bg-blue-600 hover:bg-blue-700 active:scale-[0.98]'} text-white font-extrabold py-4 rounded-2xl transition-all shadow-xl shadow-blue-100 text-sm uppercase tracking-[0.2em] flex items-center justify-center gap-3 mt-4`}>
                                    {isSyncing ? <div className="w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"></div> : <Icon name="send" size={16} />}
                                    {isSyncing ? "Menyimpan..." : "Kirim Laporan"}
                                </button>
                            </form>
                        </section>

                        <section className="space-y-4">
                            <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 px-2">
                                <div className="flex items-center gap-2">
                                    <div className="p-2 bg-slate-900 rounded-xl">
                                        <Icon name="activity" size={18} className="text-white" />
                                    </div>
                                    <h2 className="text-xl font-extrabold text-slate-900 tracking-tight">Monitoring</h2>
                                </div>
                                <input type="date" value={selectedDate} onChange={(e) => setSelectedDate(e.target.value)} className="px-4 py-2 rounded-2xl border border-slate-200 font-bold text-xs bg-white shadow-sm outline-none focus:ring-2 focus:ring-blue-500" />
                            </div>
                            
                            <div className="space-y-4">
                                {loading ? (
                                    <div className="flex justify-center py-12"><div className="w-8 h-8 border-4 border-slate-100 border-t-blue-600 rounded-full animate-spin"></div></div>
                                ) : filteredTasks.length === 0 ? (
                                    <div className="bg-white border-2 border-dashed border-slate-200 rounded-[2rem] p-12 text-center">
                                        <Icon name="inbox" size={40} className="mx-auto mb-4 text-slate-200" />
                                        <p className="text-slate-400 font-bold text-xs uppercase tracking-widest">Tidak ada data di tanggal ini</p>
                                    </div>
                                ) : (
                                    filteredTasks.map(task => {
                                        const sameProjectTasks = tasks.filter(t => t.name === task.name);
                                        const totalFinishedO = sameProjectTasks.reduce((sum, t) => sum + (parseInt(t.oplah) || 0), 0);
                                        const targetO = parseInt(task.totalOplah) || 0;
                                        const percentage = targetO > 0 ? Math.min(Math.round((totalFinishedO / targetO) * 100), 100) : 0;
                                        const isBantu = task.category.includes('Bantu');

                                        return (
                                            <div key={task.id} className="bg-white rounded-[2rem] p-6 shadow-sm border border-slate-100 relative overflow-hidden group">
                                                <div className={`absolute top-0 left-0 w-2 h-full transition-all ${isBantu ? 'bg-orange-400' : 'bg-blue-600'}`}></div>
                                                
                                                <div className="flex flex-col sm:flex-row justify-between gap-6">
                                                    <div className="flex-1 space-y-4">
                                                        <div>
                                                            <div className="flex items-center gap-2 mb-1.5">
                                                                <span className="text-[9px] font-black text-slate-400 uppercase tracking-widest">Produk</span>
                                                                <span className={`text-[9px] font-black px-2 py-0.5 rounded-full text-white ${isBantu ? 'bg-orange-400' : 'bg-slate-800'}`}>{task.category}</span>
                                                            </div>
                                                            <h3 className="text-2xl font-extrabold text-slate-900 leading-tight uppercase font-serif italic">{task.name}</h3>
                                                            <div className="flex flex-wrap gap-2 mt-3">
                                                                <div className="flex items-center gap-1.5 px-3 py-1 bg-slate-50 border border-slate-100 rounded-full">
                                                                    <Icon name="user" size={12} className="text-slate-400" />
                                                                    <span className="text-[10px] font-bold text-slate-600">{task.workerName}</span>
                                                                </div>
                                                                {task.assistantNames && task.assistantNames !== '-' && (
                                                                    <div className="flex items-center gap-1.5 px-3 py-1 bg-slate-50 border border-slate-100 rounded-full">
                                                                        <Icon name="users" size={12} className="text-slate-400" />
                                                                        <span className="text-[10px] font-medium text-slate-500 italic">Asist: {task.assistantNames}</span>
                                                                    </div>
                                                                )}
                                                            </div>
                                                        </div>

                                                        <div className="grid grid-cols-2 gap-3">
                                                            <div className="bg-emerald-50/50 p-3 rounded-2xl border border-emerald-100">
                                                                <p className="text-[8px] font-black text-emerald-600 uppercase mb-0.5 italic">Hasil Oplah</p>
                                                                <p className="text-xl font-black text-emerald-700">{Number(task.oplah).toLocaleString('id-ID')} <span className="text-[10px] font-normal opacity-50 italic">Lbr</span></p>
                                                            </div>
                                                            <div className="bg-blue-50/50 p-3 rounded-2xl border border-blue-100">
                                                                <p className="text-[8px] font-black text-blue-600 uppercase mb-0.5 italic">Hasil Pcs</p>
                                                                <p className="text-xl font-black text-blue-700">{Number(task.pcsSelesai).toLocaleString('id-ID')} <span className="text-[10px] font-normal opacity-50 italic">Pcs</span></p>
                                                            </div>
                                                        </div>

                                                        {targetO > 0 && (
                                                            <div className="space-y-1.5 pt-1">
                                                                <div className="flex justify-between items-end">
                                                                    <span className="text-[9px] font-black text-slate-400 uppercase italic">Progres Projek</span>
                                                                    <span className="text-[10px] font-black text-blue-600">{percentage}%</span>
                                                                </div>
                                                                <div className="h-2 bg-slate-100 rounded-full overflow-hidden border border-slate-200">
                                                                    <div className="h-full bg-blue-600 transition-all duration-1000" style={{ width: `${percentage}%` }}></div>
                                                                </div>
                                                                <p className="text-[8px] font-bold text-slate-400 text-right uppercase tracking-tighter">Kumulatif: {totalFinishedO.toLocaleString('id-ID')} / {targetO.toLocaleString('id-ID')} Lbr</p>
                                                            </div>
                                                        )}

                                                        {task.kendala && task.kendala !== '-' && (
                                                            <div className="bg-orange-50 p-3 rounded-2xl border border-orange-100 flex gap-3 items-start">
                                                                <Icon name="alert-triangle" size={14} className="text-orange-500 mt-0.5 shrink-0" />
                                                                <div>
                                                                    <p className="text-[8px] font-black text-orange-600 uppercase leading-none mb-1">Catatan Kendala:</p>
                                                                    <p className="text-[11px] font-bold text-orange-800 italic leading-tight">"{task.kendala}"</p>
                                                                </div>
                                                            </div>
                                                        )}
                                                    </div>

                                                    <div className="flex sm:flex-col justify-between items-end sm:w-32 border-t sm:border-t-0 sm:border-l border-slate-100 pt-4 sm:pt-0 sm:pl-4">
                                                        <div className="text-right space-y-1.5">
                                                            <p className="text-[9px] font-black text-slate-400 uppercase tracking-widest italic">Waktu Shift</p>
                                                            <div className="inline-flex items-center gap-1.5 bg-slate-900 text-white px-3 py-1.5 rounded-xl font-mono text-[11px] font-bold shadow-md">
                                                                <Icon name="clock" size={10} className="text-blue-400" />
                                                                {task.startTime}-{task.endTime}
                                                            </div>
                                                            <p className="text-3xl font-black text-slate-900 leading-none pt-2 tracking-tighter">{task.durationValue}<span className="text-[10px] text-slate-400 block font-sans font-bold uppercase mt-1">Menit</span></p>
                                                        </div>
                                                        
                                                        <button onClick={async () => { if(confirm("Hapus data ini?")) await deleteDoc(doc(db, 'artifacts', appId, 'public', 'data', 'laminasi_logs', task.id)); }} className="p-3 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-2xl transition-all">
                                                            <Icon name="trash-2" size={18} />
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        );
                                    })
                                )}
                            </div>
                        </section>
                    </main>

                    <nav className="fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-lg border-t border-slate-200 px-6 py-4 z-50 flex justify-around items-center max-w-2xl mx-auto rounded-t-[2rem] shadow-[0_-10px_40px_rgba(0,0,0,0.05)]">
                        <div className="text-center group">
                            <p className="text-[8px] font-black text-slate-400 uppercase mb-0.5 group-hover:text-emerald-500 transition-colors">Oplah Hari Ini</p>
                            <p className="text-sm font-black text-emerald-600">{filteredTasks.reduce((s, t) => s + (parseInt(t.oplah) || 0), 0).toLocaleString('id-ID')}</p>
                        </div>
                        <div className="h-8 w-px bg-slate-200"></div>
                        <div className="text-center group">
                            <p className="text-[8px] font-black text-slate-400 uppercase mb-0.5 group-hover:text-blue-500 transition-colors">Durasi Kerja</p>
                            <p className="text-sm font-black text-blue-600">{filteredTasks.reduce((s, t) => s + (parseInt(t.durationValue) || 0), 0)} Menit</p>
                        </div>
                        <div className="h-8 w-px bg-slate-200"></div>
                        <div className="text-center group">
                            <p className="text-[8px] font-black text-slate-400 uppercase mb-0.5 group-hover:text-blue-900 transition-colors">Pcs Hari Ini</p>
                            <p className="text-sm font-black text-blue-900">{filteredTasks.reduce((s, t) => s + (parseInt(t.pcsSelesai) || 0), 0).toLocaleString('id-ID')}</p>
                        </div>
                    </nav>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
